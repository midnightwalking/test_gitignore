<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Home</title>
    <link href="../lib/bootstrap/bootstrap.min.css" rel="stylesheet" type="text/css">
    <script src="../lib/jquery/jquery-3.3.1.min.js" type="text/javascript"></script>
    <script src="../lib/bootstrap/bootstrap.min.js" type="text/javascript"></script>
    <script type="text/javascript" src="../lib/wangEditor/wangEditor.min.js"></script>
</head>
<body>
    <h1>Welcome to my space!</h1>
    <div id="editor">
        <p>欢迎使用 <b>wangEditor</b> 富文本编辑器</p>
    </div>
    <button id="btn1">获取html</button>
    <button id="btn2">获取text</button>
    <button id="submit">提交</button>
</body>

<script>
    var E = window.wangEditor
    var editor = new E('#editor')
    // 或者 var editor = new E( document.getElementById('editor') )
    editor.customConfig.uploadImgShowBase64 = true;   // 使用 base64 保存图片
    // 隐藏“网络图片”tab
    editor.customConfig.showLinkImg = false;


    editor.create();

    $("#submit").on('click',function(){
        $.ajax({
            type: "POST",
            url: "/shrio-web/addArticle",
            data: {
                content: editor.txt.html()
            },
            async: true,
            dataType: "json",
            success: function(result) {
                if(result.retCode == '0'){
                    alert("操作成功");
                }else{
                    alert(result.retMsg);
                }
            },
            error : function(data) {
                alert("error")
            }
        });
    });


    document.getElementById('btn1').addEventListener('click', function () {
        // 读取 html
        alert(editor.txt.html())
    }, false);

    document.getElementById('btn2').addEventListener('click', function () {
        // 读取 text
        alert(editor.txt.text())
    }, false);
</script>
</html>